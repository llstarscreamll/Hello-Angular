<form [formGroup]="controls">

<div *ngFor="let item of getModelKeys()">

    <div [ngSwitch]="model[item].type">
        
        <!-- Textbox -->
        <div *ngSwitchCase="'text'" class="form-group">
            <label [attr.for]="item"
                   class="col-sm-3 control-label">
                {{ model[item].label }}
            </label>
            <div class="col-sm-9">
            <input type="text"
                   name="{{ item }}"
                   [attr.id]="item"
                   class="form-control"
                   formControlName="{{ item }}"
                   placeholder="{{ model[item].placeholder }}">
            </div>
        </div>

        <!-- Textarea -->
        <div *ngSwitchCase="'textarea'" class="form-group">
            <label [attr.for]="item"
                   class="col-sm-3 control-label">
                {{ model[item].label }}
            </label>
            <div class="col-sm-9">
            <textarea name="{{ item }}"
                      [attr.id]="item"
                      class="form-control"
                      formControlName="{{ item }}"
                      placeholder="{{ model[item].placeholder || null }}">
            </textarea>
            </div>
        </div>

        <!-- Select -->
        <div *ngSwitchCase="'select'" class="form-group">
            <label [attr.for]="item"
                   class="col-sm-3 control-label">
                {{ model[item].label }}
            </label>
            <div class="col-sm-9">
            <select name="{{ item }}"
                    formControlName="{{ item }}"
                    [attr.id]="item"
                    [multiple]="model[item].multiple || false"
                    [size]="model[item].size || (model[item].multiple ? 5 : 1)"
                    class="form-control">

                <!-- if we have dynamic options setup -->
                <ng-container *ngIf="model[item].dynamicOptions !== undefined">
                    <ng-container *ngFor="let option of data[model[item].dynamicOptions.data]">
                    <option *ngIf="option[model[item].dynamicOptions.key] == controls.get(model[item].dynamicOptions.field).value"
                            [value]="option.id || option.value">
                        {{ option.name || option.label }}
                    </option>
                    </ng-container>
                </ng-container>

                <!-- if we have static options setup -->
                <ng-container *ngIf="model[item].dynamicOptions === undefined">
                    <option *ngFor="let foo of model[item].options"
                            [value]="foo.value"
                            [disabled]="foo.disabled === true">
                        {{ foo.label }}
                    </option>
                </ng-container>
            </select>
            </div>
        </div>

        <!-- Radio button -->
        <div *ngSwitchCase="'radiobutton'" class="form-group">
            <label class="col-sm-3 control-label">
                {{ model[item].label }}
            </label>

            <div class="col-sm-9">
            
                <div *ngFor="let option of model[item].options" class="radio">
                    <label>
                        <input type="radio"
                               formControlName="{{ item }}"
                               name="{{ item }}"
                               [value]="option.value">
                        {{ option.label }}
                    </label>
                </div>

            </div>
        </div>
        
        <!-- checkbox array -->
        <div *ngSwitchCase="'checkbox-array'" class="form-group">
            <label class="col-sm-3 control-label">
                {{ model[item].label }}
            </label>

            <div class="col-sm-9">
            
                <div *ngFor="let option of model[item].options" class="checkbox">
                    <label>
                        <input type="checkbox"
                               [value]="option.value"
                               name="{{ item }}"
                               (click)="toggleArrayControlItemValue(item, $event.target.value)">
                        {{ option.label }}
                    </label>
                </div>

            </div>
        </div>

        <!-- single checkbox -->
        <div *ngSwitchCase="'checkbox'" class="form-group">
            <label [attr.for]="item"
                   class="col-sm-3 control-label">
                {{ model[item].label }}
            </label>
            <div class="col-sm-9">
            
                <div class="checkbox">
                    <label>
                        <input type="checkbox"
                               [value]="model[item].option.value"
                               name="{{ item }}"
                               formControlName="{{ item }}">
                        {{ model[item].option.label }}
                    </label>
                </div>

            </div>
        </div>

        <!-- Default output -->
        <div *ngSwitchDefault class="text-danger">
            Unsupported Widget!!
        </div>

    </div>

</div>
</form>
<pre> {{ controls.value | json }} </pre>